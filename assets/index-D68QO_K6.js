(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();let l=JSON.parse(localStorage.getItem("tasks"))||[],f=JSON.parse(localStorage.getItem("inbox"))||[];JSON.parse(localStorage.getItem("projects"));let u=new Date().toISOString().split("T")[0],P=0,k="#54a0ff",S="circle",T="task",p=null,I="none",x="none",d=JSON.parse(localStorage.getItem("settings"))||{notifyTaskStart:!0,notifyMissedTasks:!0,autoReschedule:!0,notificationFrequency:"realtime"},r={isRunning:!1,isPaused:!1,totalSeconds:1500,remainingSeconds:1500,interval:null},m=null,v=!1;const V=document.getElementById("week-bar"),re=document.getElementById("task-list"),de=document.getElementById("habit-list"),N=document.getElementById("inbox-list"),ue=document.getElementById("project-list"),C=document.getElementById("timeline-slots"),O=document.getElementById("time-marker"),Y=document.getElementById("main-fab"),Q=document.getElementById("fab-menu"),Z=document.getElementById("creation-modal"),J=document.getElementById("scheduling-section"),U=document.getElementById("project-section"),me=document.getElementById("save-btn"),$=document.getElementById("title-input"),H=document.getElementById("notes-input"),B=document.getElementById("time-input"),M=document.getElementById("date-input"),R=document.getElementById("duration-input"),pe=document.getElementById("timer-widget"),X=document.getElementById("voice-modal"),_=document.getElementById("settings-modal"),b=120;function ee(){te(),j(),h(),L(),K(),setInterval(K,6e4),be(),ne(),W(),setInterval(W,6e4),lucide.createIcons(),setTimeout(ge,100),M.value=u,ke(),ae()}function ge(){const e=l.find(i=>i.date===u&&(i.title.includes("Wake Up")||i.title.includes("èµ·ãã‚‹"))),t=document.querySelector(".timeline-scroll-area");if(e&&e.startTime){const[i,n]=e.startTime.split(":").map(Number),s=i*b+n/60*b;t.scrollTo({top:s-100,behavior:"smooth"})}else t.scrollTo({top:8*b-50,behavior:"smooth"})}function te(){const e=["January","February","March","April","May","June","July","August","September","October","November","December"],t=new Date;t.setDate(t.getDate()+P*7),document.getElementById("current-month").textContent=`${e[t.getMonth()]} ${t.getFullYear()}`}function j(){V.innerHTML="";const e=new Date;e.setDate(e.getDate()+P*7);for(let t=0;t<7;t++){const i=new Date(e);i.setDate(e.getDate()+t);const n=i.toISOString().split("T")[0],s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][i.getDay()],o=document.createElement("div");o.className=`day-item ${n===u?"active":""}`,o.innerHTML=`
      <span class="day-name">${s}</span>
      <span class="day-date">${i.getDate()}</span>
    `,o.onclick=()=>{u=n,M.value=u,j(),ne(),L()},V.appendChild(o)}}window.changeWeek=e=>{P+=e,te(),j()};function h(){N&&(f.length===0?N.innerHTML='<p style="opacity:0.3; font-size:14px; font-weight:700; text-align:center; padding: 20px;">ç©º</p>':N.innerHTML=f.map((n,s)=>`
        <div class="inbox-item" style="border-left-color: #54a0ff">
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <span style="font-weight:800; font-size:16px;">${n.text}</span>
            <div class="task-actions" style="flex-direction:row; gap:10px;">
              <i data-lucide="arrow-right" onclick="organizeInboxItem(${s})" title="æ•´ç†"></i>
              <i data-lucide="trash-2" onclick="deleteInboxItem(${s})"></i>
            </div>
          </div>
          ${n.timestamp?`<div style="opacity:0.5; font-size:12px; margin-top:4px;">${new Date(n.timestamp).toLocaleString("ja-JP")}</div>`:""}
        </div>
      `).join(""));const e=l.filter(n=>n.type==="task"&&!n.startTime&&!n.completed);G(e,re);const t=l.filter(n=>n.type==="project");fe(t,ue);const i=l.filter(n=>n.type==="habit"&&!n.completed);G(i,de),lucide.createIcons()}function G(e,t,i){t&&(t.innerHTML=e.map(n=>`
    <div class="inbox-item" style="border-left-color: ${n.color}">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <div style="display:flex; align-items:center; gap:8px;">
          <i data-lucide="${n.icon||"circle"}" style="width:16px; height:16px; color:${n.color}"></i>
          <span style="font-weight:800; font-size:16px;">${n.title}</span>
        </div>
        <div class="task-actions" style="flex-direction:row; gap:10px;">
          <i data-lucide="edit-2" onclick="openModal('${n.type}', ${n.id})"></i>
          <i data-lucide="trash-2" onclick="deleteItem(${n.id}, event)"></i>
        </div>
      </div>
    </div>
  `).join(""),e.length===0&&(t.innerHTML='<p style="opacity:0.3; font-size:14px; font-weight:700; text-align:center; padding: 20px;">ç©º</p>'))}function fe(e,t){t&&(t.innerHTML=e.map(i=>{const n=i.subtasks||[],s=n.filter(a=>a.completed).length,o=n.length,c=o>0?Math.round(s/o*100):0;return`
      <div class="inbox-item project-item" style="border-left-color: ${i.color}">
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <div style="flex:1;">
            <div style="display:flex; align-items:center; gap:8px; margin-bottom:8px;">
              <i data-lucide="${i.icon||"folder"}" style="width:16px; height:16px; color:${i.color}"></i>
              <span style="font-weight:800; font-size:16px;">${i.title}</span>
            </div>
            ${o>0?`
              <div style="font-size:12px; opacity:0.7; margin-bottom:4px;">${s}/${o} å®Œäº†</div>
              <div class="progress-bar">
                <div class="progress-fill" style="width:${c}%; background:${i.color}"></div>
              </div>
            `:""}
          </div>
          <div class="task-actions" style="flex-direction:row; gap:10px;">
            <i data-lucide="edit-2" onclick="openModal('project', ${i.id})"></i>
            <i data-lucide="trash-2" onclick="deleteItem(${i.id}, event)"></i>
          </div>
        </div>
      </div>
    `}).join(""),e.length===0&&(t.innerHTML='<p style="opacity:0.3; font-size:14px; font-weight:700; text-align:center; padding: 20px;">ç©º</p>'))}function L(){C.innerHTML="";for(let o=0;o<24;o++){const c=document.createElement("div");c.className="time-slot",c.innerHTML=`<span class="time-label">${o.toString().padStart(2,"0")}:00</span>`,C.appendChild(c)}const e=document.createElement("div");e.style.height="120px",e.style.position="relative",e.innerHTML='<span class="time-label">00:00</span>',C.appendChild(e);const i=l.filter(o=>o.date===u&&o.startTime).map(o=>{const[c,a]=o.startTime.split(":").map(Number),y=c+a/60;return{...o,startHour:y,endHour:y+o.duration/60}});i.sort((o,c)=>o.startHour-c.startHour);const n=[];i.forEach(o=>{let c=!1;for(let a=0;a<n.length;a++){const y=n[a][n[a].length-1];if(o.startHour>=y.endHour){n[a].push(o),c=!0;break}}c||n.push([o])});const s=n.length;n.forEach((o,c)=>{o.forEach(a=>{const y=a.startHour*b,A=a.duration/60*b,F=100/s,g=document.createElement("div");g.className=`task-card ${a.completed?"completed":""}`,g.style.top=`${40+y}px`,g.style.height=`${A}px`,g.style.left="auto",g.style.right=`${c*F}%`,g.style.width=`${F-2}%`,g.style.borderLeftColor=a.color||"#54a0ff",g.style.color=a.color||"#54a0ff";const ce=a.type==="project"&&a.subtasks?`<div style="font-size:11px; opacity:0.6;">${a.subtasks.filter(le=>le.completed).length}/${a.subtasks.length} ã‚µãƒ–ã‚¿ã‚¹ã‚¯</div>`:"";g.innerHTML=`
        <div class="task-title">
          <i data-lucide="${a.icon||"circle"}" style="width:14px; height:14px; margin-right:4px;"></i>
          ${a.title}
        </div>
        <div class="task-time">${a.startTime} â€¢ ${a.duration}m ${a.repeat!=="none"?"ğŸ”„":""}${a.reminder!=="none"?"ğŸ””":""}</div>
        ${ce}
        <div class="task-footer">
          <div class="task-actions">
            <i data-lucide="edit-2" onclick="openModal('${a.type}', ${a.id})" style="opacity: 0.2"></i>
            <i data-lucide="trash-2" onclick="deleteItem(${a.id}, event)" style="opacity: 0.2"></i>
            <i data-lucide="${a.completed?"check-circle":"circle"}" 
               onclick="toggleComplete(${a.id}, event)" 
               style="color: ${a.color||"#54a0ff"}; ${a.completed?"opacity:1":"opacity:0.8"}"></i>
          </div>
        </div>
      `,C.appendChild(g)})}),lucide.createIcons()}function ne(){l.filter(t=>t.repeat&&t.repeat!=="none").forEach(t=>{if(!l.find(n=>n.title===t.title&&n.date===u)){let n=!1;const o=new Date(u).getDay();t.repeat==="daily"&&(n=!0),t.repeat==="weekly"&&new Date(t.date).getDay()===o&&(n=!0),t.repeat==="weekday"&&o>=1&&o<=5&&(n=!0),n&&l.push({...t,id:Date.now()+Math.random(),date:u,completed:!1})}}),w()}function W(){if(!d.autoReschedule)return;const e=new Date,t=e.toISOString().split("T")[0];e.getHours()*60+e.getMinutes(),l.forEach(i=>{if(i.date<t&&!i.completed&&i.startTime){const n=new Date(e);n.setDate(n.getDate()+1),i.date=n.toISOString().split("T")[0],i.rescheduled=!0,d.notifyMissedTasks&&E("é€ƒã—ãŸã‚¿ã‚¹ã‚¯",`ã€Œ${i.title}ã€ã‚’æ˜æ—¥ã«å†è¨ˆç”»ã—ã¾ã—ãŸ`)}}),w()}function E(e,t){"Notification"in window&&Notification.permission==="granted"?new Notification(e,{body:t,icon:"/javascript.svg"}):"Notification"in window&&Notification.permission!=="denied"&&Notification.requestPermission().then(i=>{i==="granted"&&new Notification(e,{body:t,icon:"/javascript.svg"})})}window.toggleFabMenu=()=>{Y.classList.toggle("open"),Q.classList.toggle("open")};window.openModal=(e,t=null)=>{T=e,p=t,Z.style.display="flex";const i=document.getElementById("modal-title");if(e==="project"?(i.textContent=t?"Edit Project":"New Project",U.style.display="block"):(e==="habit"?i.textContent="New Habit":i.textContent="New Task",U.style.display="none"),t){const n=l.find(s=>s.id===t);$.value=n.title,H.value=n.notes||"",M.value=n.date||u,n.startTime?B.value=n.startTime:B.value="",R.value=n.duration,I=n.repeat||"none",x=n.reminder||"none",k=n.color||"#54a0ff",S=n.icon||"circle",J.style.display="block",n.type==="project"&&D(n.subtasks||[])}else $.value="",H.value="",M.value=u,e==="task"?(B.value="",J.style.display="none"):(B.value="08:00",J.style.display="block"),R.value=30,I="none",x="none",k="#54a0ff",S="circle",e==="project"&&D([]);oe(),ie(),se(),me.onclick=he,ye()};function ye(){Y.classList.remove("open"),Q.classList.remove("open")}window.closeModal=()=>{Z.style.display="none"};function D(e){const t=document.getElementById("subtask-list");t.innerHTML=e.map((i,n)=>`
    <div class="subtask-item" style="display:flex; align-items:center; gap:8px; margin-bottom:8px; padding:8px; background:rgba(255,255,255,0.05); border-radius:8px;">
      <input type="checkbox" ${i.completed?"checked":""} onchange="toggleSubtaskInEditor(${n})">
      <input type="text" value="${i.title}" class="premium-input-modern" style="flex:1; padding:8px;" onchange="updateSubtaskTitle(${n}, this.value)">
      <i data-lucide="trash-2" onclick="removeSubtask(${n})" style="cursor:pointer;"></i>
    </div>
  `).join(""),lucide.createIcons()}window.addSubtask=()=>{document.getElementById("subtask-list");const e={title:"æ–°ã—ã„ã‚µãƒ–ã‚¿ã‚¹ã‚¯",completed:!1},i=(p?l.find(n=>n.id===p):null)?.subtasks||[];i.push(e),D(i)};window.toggleSubtaskInEditor=e=>{const t=p?l.find(i=>i.id===p):null;t&&t.subtasks&&(t.subtasks[e].completed=!t.subtasks[e].completed)};window.updateSubtaskTitle=(e,t)=>{const i=p?l.find(n=>n.id===p):null;i&&i.subtasks&&(i.subtasks[e].title=t)};window.removeSubtask=e=>{const t=p?l.find(i=>i.id===p):null;t&&t.subtasks&&(t.subtasks.splice(e,1),D(t.subtasks))};function he(){const e=$.value,t=H.value,i=B.value,n=M.value,s=parseInt(R.value);if(!e)return;let o=[];if(T==="project"){const c=document.querySelectorAll('#subtask-list .subtask-item input[type="text"]'),a=document.querySelectorAll('#subtask-list .subtask-item input[type="checkbox"]');o=Array.from(c).map((y,A)=>({title:y.value,completed:a[A]?.checked||!1}))}if(p){const c=l.findIndex(a=>a.id===p);l[c]={...l[c],title:e,notes:t,date:n,startTime:i,duration:s,repeat:I,reminder:x,color:k,icon:S,subtasks:T==="project"?o:l[c].subtasks}}else l.push({id:Date.now(),title:e,notes:t,date:n,startTime:i,duration:s,completed:!1,type:T,repeat:I,reminder:x,color:k,icon:S,subtasks:T==="project"?o:void 0});w(),L(),h(),closeModal()}window.toggleComplete=(e,t)=>{t.stopPropagation();const i=l.find(n=>n.id===e);i&&(i.completed=!i.completed,i.completed&&d.notifyTaskStart&&E("ã‚¿ã‚¹ã‚¯å®Œäº†",`ã€Œ${i.title}ã€ã‚’å®Œäº†ã—ã¾ã—ãŸï¼`)),w(),L(),h()};window.deleteItem=(e,t)=>{t?.stopPropagation(),l=l.filter(i=>i.id!==e),w(),L(),h()};window.addInboxNote=()=>{const e=prompt("ã‚¯ã‚¤ãƒƒã‚¯ãƒ¡ãƒ¢ã‚’å…¥åŠ›:");e&&(f.push({text:e,timestamp:Date.now()}),q(),h())};window.organizeInboxItem=e=>{const t=f[e];$.value=t.text,f.splice(e,1),q(),h(),openModal("task")};window.deleteInboxItem=e=>{f.splice(e,1),q(),h()};function q(){localStorage.setItem("inbox",JSON.stringify(f))}function be(){document.querySelectorAll(".color-circle").forEach(e=>{e.onclick=()=>{k=e.dataset.color,ie()}}),document.querySelectorAll("[data-repeat]").forEach(e=>{e.onclick=()=>{I=e.dataset.repeat,oe()}}),document.querySelectorAll("[data-reminder]").forEach(e=>{e.onclick=()=>{x=e.dataset.reminder,we()}}),document.querySelectorAll(".icon-btn").forEach(e=>{e.onclick=()=>{S=e.dataset.icon,se()}})}function ie(){document.querySelectorAll(".color-circle").forEach(e=>{e.classList.toggle("active",e.dataset.color===k)})}function oe(){document.querySelectorAll("[data-repeat]").forEach(e=>{e.classList.toggle("active",e.dataset.repeat===I)})}function we(){document.querySelectorAll("[data-reminder]").forEach(e=>{e.classList.toggle("active",e.dataset.reminder===x)})}function se(){document.querySelectorAll(".icon-btn").forEach(e=>{e.classList.toggle("active",e.dataset.icon===S)})}function K(){const e=new Date;if(e.toISOString().split("T")[0]===u){O.style.display="block";const t=e.getHours(),i=e.getMinutes(),n=40+t*b+i/60*b;O.style.top=`${n}px`}else O.style.display="none"}window.toggleTimer=()=>{pe.classList.toggle("show")};window.startTimer=()=>{r.isRunning||(r.isRunning=!0,r.isPaused=!1,document.getElementById("timer-start-btn").style.display="none",document.getElementById("timer-pause-btn").style.display="inline-flex",r.interval=setInterval(()=>{r.remainingSeconds>0?(r.remainingSeconds--,z()):ve()},1e3))};window.pauseTimer=()=>{r.isRunning&&(r.isRunning=!1,r.isPaused=!0,clearInterval(r.interval),document.getElementById("timer-start-btn").style.display="inline-flex",document.getElementById("timer-pause-btn").style.display="none")};window.resetTimer=()=>{pauseTimer(),r.remainingSeconds=r.totalSeconds,r.isPaused=!1,z()};window.setTimerPreset=e=>{resetTimer(),r.totalSeconds=e*60,r.remainingSeconds=e*60,z(),document.querySelectorAll(".preset-btn").forEach(i=>{i.classList.toggle("active",parseInt(i.dataset.minutes)===e)});const t=e>20?"é›†ä¸­æ™‚é–“":"ä¼‘æ†©æ™‚é–“";document.getElementById("timer-label").textContent=t};function z(){const e=Math.floor(r.remainingSeconds/60),t=r.remainingSeconds%60;document.getElementById("timer-time").textContent=`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;const i=document.getElementById("timer-progress"),s=2*Math.PI*90*(1-r.remainingSeconds/r.totalSeconds);i.style.strokeDashoffset=s}function ve(){pauseTimer(),E("ã‚¿ã‚¤ãƒãƒ¼å®Œäº†","ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚é–“ãŒçµ‚äº†ã—ã¾ã—ãŸï¼"),typeof Audio<"u"&&new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIGGS57OihURELTKXh8bllHAU2kNbx0n4qBSh+zPLaizsKFFm16+mjUxMMSZ7f8sFuJAUuhM/y2Ik1CBhkvOzooVERDEyl4PG5ZRwFN5DW8dJ+KgYrhM7y2Ys4CRpcturqpVMTDEud3/HBbiQGLoPP8tuKNwgXZLzs6KFPFA1NpODxuWcdBjiP1vHSfykGKoTP8tuJOAgaXLbq6qVUEgtKnN/xwW4lBS+Cz/LZizgJG1216OinUxQMS5vf8cJuKgU3kdbx0n4qBiuEz/LbizcKGlu16+qmVRMMTJzf8cFtJQYugM/y24o4CRhcterqpVQSC0qc3/HCbSUIL4LQ8tmLOAkaXLbq6qZUEwtKnN/xwW4lBi+Dz/LcizgKGly26uqmVRQMTJzf8cJtJggwgM/y24o4CBlcterqpVUTC0qb3/HCbSYJL4LQ8tmLOAoaXLXq6qZVFAxMnN/xwm0mCDCAz/LbijgKGly16uqmVRULTJzf8cJtJggvgc/y24s5ChtcterqpVYUDEub3/HCbSYJMIPP8tuLOQobXLXr6qZWFQxLm9/xwm0mCTCCz/LbizgKG1y06uqmVhUMS5vf8cJtJgkwgs/y24s6ChtbtOvqplYVBNMm9/xwm0mCTCCz/LbizgKG1y06+qmVRUMTJvf8cJtJggwgs/y24s4CxtcterqpVYUDEua3/HCbScJMILP8tuKOQsbW7Xr6qZWFQ1Lmt/xwm0mCTCC0PLbizgLG1u16OmlVxYNS5rf8cJtJwkwgs/y3Io5CxtbtevqpVYWDUua3/HDbScJMYLP8tuKOQsbW7Xr6qVWFg1Lmt/xw20nCTGCz/LbijkLG1u06+qlVRYNS5rf8cNtJwkxgs/y24o5CxtbterqpVUWDUua3/HDbScJMYLP8tuLOgscXLTq6qZWFg1Lmt/xw20oCTGBz/LbizgLHFy06uqmVhYNS5rf8cNtKAkxgc/y24s6CxxcterqpVYWDUqb3/HDbSgKMYHA==").play().catch(()=>{}),resetTimer()}function ke(){if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;m=new e,m.lang="ja-JP",m.continuous=!1,m.interimResults=!0,m.onresult=t=>{let i="";for(let n=t.resultIndex;n<t.results.length;n++)i+=t.results[n][0].transcript;document.getElementById("voice-transcript").textContent=i,t.results[t.results.length-1].isFinal&&Se(i)},m.onend=()=>{v=!1,document.getElementById("voice-pulse").classList.remove("active"),document.getElementById("voice-btn").innerHTML='<i data-lucide="mic"></i> éŸ³å£°èªè­˜ã‚’é–‹å§‹',lucide.createIcons()},m.onerror=t=>{console.error("Speech recognition error:",t.error),v=!1,document.getElementById("voice-pulse").classList.remove("active")}}}window.openVoiceInput=()=>{if(!m){alert("ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŸ³å£°èªè­˜ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚Chromeã€Edgeã€Safariã‚’ãŠè©¦ã—ãã ã•ã„ã€‚");return}X.style.display="flex",document.getElementById("voice-transcript").textContent=""};window.closeVoiceInput=()=>{v&&m.stop(),X.style.display="none"};window.toggleVoiceRecognition=()=>{m&&(v?(m.stop(),v=!1):(m.start(),v=!0,document.getElementById("voice-pulse").classList.add("active"),document.getElementById("voice-btn").innerHTML='<i data-lucide="mic-off"></i> åœæ­¢',lucide.createIcons()))};function Se(e){let t=e,i=u,n="08:00",s=30;if(e.includes("æ˜æ—¥")){const c=new Date;c.setDate(c.getDate()+1),i=c.toISOString().split("T")[0],t=e.replace("æ˜æ—¥","").trim()}else e.includes("ä»Šæ—¥")&&(i=new Date().toISOString().split("T")[0],t=e.replace("ä»Šæ—¥","").trim());const o=e.match(/(åˆå‰|åˆå¾Œ)?(\d{1,2})(æ™‚)?/);if(o){let c=parseInt(o[2]);o[1]==="åˆå¾Œ"&&c<12&&(c+=12),n=`${c.toString().padStart(2,"0")}:00`,t=e.replace(o[0],"").trim()}e.includes("1æ™‚é–“")?(s=60,t=t.replace("1æ™‚é–“","").trim()):e.includes("2æ™‚é–“")&&(s=120,t=t.replace("2æ™‚é–“","").trim()),t=t.replace(/ã®?ã€/g," ").replace(/ã«/g," ").trim(),t&&(l.push({id:Date.now(),title:t,notes:`éŸ³å£°å…¥åŠ›: "${e}"`,date:i,startTime:n,duration:s,completed:!1,type:"task",repeat:"none",reminder:"none",color:"#54a0ff",icon:"mic"}),w(),L(),h(),E("ã‚¿ã‚¹ã‚¯ä½œæˆ",`ã€Œ${t}ã€ã‚’è¿½åŠ ã—ã¾ã—ãŸ`),closeVoiceInput())}window.openSettings=()=>{_.style.display="flex",ae()};window.closeSettings=()=>{Ie(),_.style.display="none"};function ae(){document.getElementById("notify-task-start").checked=d.notifyTaskStart,document.getElementById("notify-missed-tasks").checked=d.notifyMissedTasks,document.getElementById("auto-reschedule").checked=d.autoReschedule,document.getElementById("notification-frequency").value=d.notificationFrequency}function Ie(){d.notifyTaskStart=document.getElementById("notify-task-start").checked,d.notifyMissedTasks=document.getElementById("notify-missed-tasks").checked,d.autoReschedule=document.getElementById("auto-reschedule").checked,d.notificationFrequency=document.getElementById("notification-frequency").value,localStorage.setItem("settings",JSON.stringify(d))}window.exportData=()=>{const e={tasks:l,inbox:f,settings:d,exportDate:new Date().toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),i=URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download=`bluecal-backup-${new Date().toISOString().split("T")[0]}.json`,n.click(),URL.revokeObjectURL(i),E("ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Œäº†","ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ")};window.importData=()=>{document.getElementById("import-file").click()};window.handleImport=e=>{const t=e.target.files[0];if(!t)return;const i=new FileReader;i.onload=n=>{try{const s=JSON.parse(n.target.result);confirm("ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚ç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ")&&(s.tasks&&(l=s.tasks),s.inbox&&(f=s.inbox),s.settings&&(d=s.settings),w(),q(),localStorage.setItem("settings",JSON.stringify(d)),ee(),E("ã‚¤ãƒ³ãƒãƒ¼ãƒˆå®Œäº†","ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å…ƒã—ã¾ã—ãŸ"))}catch{alert("ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ")}},i.readAsText(t)};function w(){localStorage.setItem("tasks",JSON.stringify(l))}window.toggleSidebar=()=>{const e=document.querySelector(".sidebar"),t=document.querySelector(".sidebar-overlay");e.classList.toggle("show"),t.classList.toggle("show")};ee();
