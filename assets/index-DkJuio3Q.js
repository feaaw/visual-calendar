(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}})();let c=JSON.parse(localStorage.getItem("tasks"))||[];c=c.map(e=>e);let d=new Date().toISOString().split("T")[0],S=0,f="#54a0ff",x="task",I=null,y="none";const B=document.getElementById("week-bar"),U=document.getElementById("task-list"),j=document.getElementById("habit-list"),g=document.getElementById("timeline-slots"),v=document.getElementById("time-marker"),z=document.getElementById("main-fab"),R=document.getElementById("fab-menu"),C=document.getElementById("creation-modal"),w=document.getElementById("scheduling-section"),_=document.getElementById("save-btn"),k=document.getElementById("title-input"),b=document.getElementById("notes-input"),m=document.getElementById("time-input"),T=document.getElementById("duration-input"),u=120;function G(){N(),$(),E(),h(),H(),setInterval(H,6e4),Y(),O(),lucide.createIcons(),setTimeout(K,100)}function K(){const e=c.find(a=>a.date===d&&(a.title.includes("Wake Up")||a.title.includes("Ëµ∑„Åç„Çã"))),n=document.querySelector(".timeline-scroll-area");if(e&&e.startTime){const[a,t]=e.startTime.split(":").map(Number),s=a*u+t/60*u;n.scrollTo({top:s-100,behavior:"smooth"})}else n.scrollTo({top:8*u-50,behavior:"smooth"})}function N(){const e=["January","February","March","April","May","June","July","August","September","October","November","December"],n=new Date;n.setDate(n.getDate()+S*7),document.getElementById("current-month").textContent=`${e[n.getMonth()]} ${n.getFullYear()}`}function $(){B.innerHTML="";const e=new Date;e.setDate(e.getDate()+S*7);for(let n=0;n<7;n++){const a=new Date(e);a.setDate(e.getDate()+n);const t=a.toISOString().split("T")[0],s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][a.getDay()],o=document.createElement("div");o.className=`day-item ${t===d?"active":""}`,o.innerHTML=`
            <span class="day-name">${s}</span>
            <span class="day-date">${a.getDate()}</span>
        `,o.onclick=()=>{d=t,$(),O(),h()},B.appendChild(o)}}window.changeWeek=e=>{S+=e,N(),$()};function E(){const e=c.filter(t=>t.type==="task"&&!t.startTime&&!t.completed),n=c.filter(t=>t.type==="habit"&&!t.startTime&&!t.completed),a=(t,s)=>{if(s.innerHTML=t.map(o=>`
        <div class="inbox-item" style="border-left-color: ${o.color}">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <span style="font-weight:800; font-size:16px;">${o.title}</span>
                <div class="task-actions" style="flex-direction:row; gap:10px;">
                   <i data-lucide="edit-2" onclick="openModal('${o.type}', ${o.id})"></i>
                   <i data-lucide="trash-2" onclick="deleteItem(${o.id}, event)"></i>
                </div>
            </div>
        </div>
    `).join(""),t.length===0){const o=s.id==="task-list"?"Tasks":"Habits";s.innerHTML=`<p style="opacity:0.3; font-size:14px; font-weight:700; text-align:center; padding: 20px;">No ${o}</p>`}};a(e,U),a(n,j),lucide.createIcons()}function h(){g.innerHTML="";for(let o=0;o<24;o++){const i=document.createElement("div");i.className="time-slot",i.innerHTML=`<span class="time-label">${o.toString().padStart(2,"0")}:00</span>`,g.appendChild(i)}const e=document.createElement("div");e.style.height="120px",e.style.position="relative",e.innerHTML='<span class="time-label">00:00</span>',g.appendChild(e);const a=c.filter(o=>o.date===d&&o.startTime).map(o=>{const[i,l]=o.startTime.split(":").map(Number),p=i+l/60;return{...o,startHour:p,endHour:p+o.duration/60}});a.sort((o,i)=>o.startHour-i.startHour);const t=[];a.forEach(o=>{let i=!1;for(let l=0;l<t.length;l++){const p=t[l][t[l].length-1];if(o.startHour>=p.endHour){t[l].push(o),i=!0;break}}i||t.push([o])});const s=t.length;t.forEach((o,i)=>{o.forEach(l=>{const p=l.startHour*u,q=l.duration/60*u,r=document.createElement("div");r.className=`task-card ${l.completed?"completed":""}`,r.style.top=`${40+p}px`,r.style.height=`${q}px`;const F=g.offsetWidth,J=Math.min(300,F*.8)+10;r.style.left="auto",r.style.right=`${i*J}px`;const D=100/s;r.style.left=`${100-(i+1)*D}%`,r.style.width=`${D-2}%`,r.style.left="auto",r.style.right=`${i*(100/s)}%`,r.style.width=`${100/s-2}%`,r.style.borderLeftColor=l.color||"#54a0ff",r.style.color=l.color||"#54a0ff",r.innerHTML=`
                <div class="task-title">${l.title}</div>
                <div class="task-time">${l.startTime} ‚Ä¢ ${l.duration}m ${l.repeat!=="none"?"üîÑ":""}</div>
                <div class="task-footer">
                    <div class="task-actions">
                        <i data-lucide="edit-2" onclick="openModal('${l.type}', ${l.id})" style="opacity: 0.2"></i>
                        <i data-lucide="trash-2" onclick="deleteItem(${l.id}, event)" style="opacity: 0.2"></i>
                        <i data-lucide="${l.completed?"check-circle":"circle"}" 
                           onclick="toggleComplete(${l.id}, event)" 
                           style="color: ${l.color||"#54a0ff"}; ${l.completed?"opacity:1":"opacity:0.8"}"></i>
                    </div>
                </div>
            `,g.appendChild(r)})}),lucide.createIcons()}function O(){c.filter(n=>n.repeat&&n.repeat!=="none").forEach(n=>{if(!c.find(t=>t.title===n.title&&t.date===d)){let t=!1;const o=new Date(d).getDay();n.repeat==="daily"&&(t=!0),n.repeat==="weekly"&&new Date(n.date).getDay()===o&&(t=!0),n.repeat==="weekday"&&o>=1&&o<=5&&(t=!0),t&&c.push({...n,id:Date.now()+Math.random(),date:d,completed:!1})}}),M()}window.toggleFabMenu=()=>{openModal("schedule",null,!0)};window.openModal=(e,n=null)=>{x=e,I=n,C.style.display="flex";const a=document.getElementById("modal-title");if(e==="habit"?a.textContent="New Habit":a.textContent="New Task",n){const t=c.find(s=>s.id===n);if(k.value=t.title,b.value=t.notes||"",t.startTime){const[s,o]=t.startTime.split(":");m.value=`${s}:00`}else m.value="";T.value=t.duration,y=t.repeat,f=t.color,w.style.display="block"}else k.value="",b.value="",new Date().getHours().toString().padStart(2,"0"),e==="sort_task"||e==="task"?(m.value="",w.style.display="none"):(m.value="00:00",w.style.display="block"),T.value=30,y="none",f="#54a0ff";m.step="300",A(),W(),_.onclick=V,z.classList.remove("open"),R.classList.remove("open")};window.closeModal=()=>{C.style.display="none"};function V(){const e=k.value,n=b.value,a=m.value,t=parseInt(T.value);if(e){if(I){const s=c.findIndex(o=>o.id===I);c[s]={...c[s],title:e,notes:n,startTime:a,duration:t,repeat:y,color:f}}else c.push({id:Date.now(),title:e,notes:n,startTime:a,duration:t,completed:!1,date:d,type:x,repeat:y,color:f});h(),E(),closeModal()}}window.toggleComplete=(e,n)=>{n.stopPropagation();const a=c.find(t=>t.id===e);a&&(a.completed=!a.completed),M(),h()};window.deleteItem=(e,n)=>{n.stopPropagation(),c=c.filter(a=>a.id!==e),M(),h(),E()};function Y(){document.querySelectorAll(".color-circle").forEach(e=>{e.onclick=()=>{f=e.dataset.color,W()}}),document.querySelectorAll(".chip-modern").forEach(e=>{e.onclick=()=>{y=e.dataset.repeat,A()}})}function W(){document.querySelectorAll(".color-circle").forEach(e=>{e.classList.toggle("active",e.dataset.color===f)})}function A(){document.querySelectorAll(".chip-modern").forEach(e=>{e.classList.toggle("active",e.dataset.repeat===y)})}function H(){const e=new Date;if(e.toISOString().split("T")[0]===d){v.style.display="block";const n=e.getHours(),a=e.getMinutes(),t=40+n*u+a/60*u;v.style.top=`${t}px`}else v.style.display="none"}const P=document.getElementById("settings-modal");window.openSettings=()=>{P.style.display="flex"};window.closeSettings=()=>{P.style.display="none"};window.setTheme=e=>{document.body.className=`theme-${e}`,localStorage.setItem("theme",e)};const L=localStorage.getItem("theme"),Q=["blue","white","black"];Q.includes(L)?document.body.className=`theme-${L}`:(document.body.className="theme-blue",localStorage.setItem("theme","blue"));function M(){localStorage.setItem("tasks",JSON.stringify(c))}G();
