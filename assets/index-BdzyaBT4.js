(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();let i=JSON.parse(localStorage.getItem("tasks"))||[];i=i.map(e=>e);let d=new Date().toISOString().split("T")[0],E=0,f="#54a0ff",x="task",k=null,y="none";const B=document.getElementById("week-bar"),U=document.getElementById("task-list"),j=document.getElementById("habit-list"),g=document.getElementById("timeline-slots"),w=document.getElementById("time-marker"),z=document.getElementById("main-fab"),R=document.getElementById("fab-menu"),C=document.getElementById("creation-modal"),I=document.getElementById("scheduling-section"),_=document.getElementById("save-btn"),b=document.getElementById("title-input"),T=document.getElementById("notes-input"),m=document.getElementById("time-input"),S=document.getElementById("duration-input"),u=120;function G(){N(),$(),M(),h(),H(),setInterval(H,6e4),Y(),O(),lucide.createIcons(),setTimeout(K,100)}function K(){const e=i.find(s=>s.date===d&&(s.title.includes("Wake Up")||s.title.includes("Ëµ∑„Åç„Çã"))),n=document.querySelector(".timeline-scroll-area");if(e&&e.startTime){const[s,t]=e.startTime.split(":").map(Number),a=s*u+t/60*u;n.scrollTo({top:a-100,behavior:"smooth"})}else n.scrollTo({top:8*u-50,behavior:"smooth"})}function N(){const e=["January","February","March","April","May","June","July","August","September","October","November","December"],n=new Date;n.setDate(n.getDate()+E*7),document.getElementById("current-month").textContent=`${e[n.getMonth()]} ${n.getFullYear()}`}function $(){B.innerHTML="";const e=new Date;e.setDate(e.getDate()+E*7);for(let n=0;n<7;n++){const s=new Date(e);s.setDate(e.getDate()+n);const t=s.toISOString().split("T")[0],a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][s.getDay()],o=document.createElement("div");o.className=`day-item ${t===d?"active":""}`,o.innerHTML=`
            <span class="day-name">${a}</span>
            <span class="day-date">${s.getDate()}</span>
        `,o.onclick=()=>{d=t,$(),O(),h()},B.appendChild(o)}}window.changeWeek=e=>{E+=e,N(),$()};function M(){const e=i.filter(t=>t.type==="task"&&!t.startTime&&!t.completed),n=i.filter(t=>t.type==="habit"&&!t.startTime&&!t.completed),s=(t,a)=>{if(a.innerHTML=t.map(o=>`
        <div class="inbox-item" style="border-left-color: ${o.color}">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <span style="font-weight:800; font-size:16px;">${o.title}</span>
                <div class="task-actions" style="flex-direction:row; gap:10px;">
                   <i data-lucide="edit-2" onclick="openModal('${o.type}', ${o.id})"></i>
                   <i data-lucide="trash-2" onclick="deleteItem(${o.id}, event)"></i>
                </div>
            </div>
        </div>
    `).join(""),t.length===0){const o=a.id==="task-list"?"Tasks":"Habits";a.innerHTML=`<p style="opacity:0.3; font-size:14px; font-weight:700; text-align:center; padding: 20px;">No ${o}</p>`}};s(e,U),s(n,j),lucide.createIcons()}function h(){g.innerHTML="";for(let o=0;o<24;o++){const c=document.createElement("div");c.className="time-slot",c.innerHTML=`<span class="time-label">${o.toString().padStart(2,"0")}:00</span>`,g.appendChild(c)}const e=document.createElement("div");e.style.height="120px",e.style.position="relative",e.innerHTML='<span class="time-label">00:00</span>',g.appendChild(e);const s=i.filter(o=>o.date===d&&o.startTime).map(o=>{const[c,l]=o.startTime.split(":").map(Number),p=c+l/60;return{...o,startHour:p,endHour:p+o.duration/60}});s.sort((o,c)=>o.startHour-c.startHour);const t=[];s.forEach(o=>{let c=!1;for(let l=0;l<t.length;l++){const p=t[l][t[l].length-1];if(o.startHour>=p.endHour){t[l].push(o),c=!0;break}}c||t.push([o])});const a=t.length;t.forEach((o,c)=>{o.forEach(l=>{const p=l.startHour*u,q=l.duration/60*u,r=document.createElement("div");r.className=`task-card ${l.completed?"completed":""}`,r.style.top=`${40+p}px`,r.style.height=`${q}px`;const F=g.offsetWidth,J=Math.min(300,F*.8)+10;r.style.left="auto",r.style.right=`${c*J}px`;const D=100/a;r.style.left="auto",r.style.right=`${c*D}%`,r.style.width=`${D-2}%`,r.style.borderLeftColor=l.color||"#54a0ff",r.style.color=l.color||"#54a0ff",r.innerHTML=`
                <div class="task-title">${l.title}</div>
                <div class="task-time">${l.startTime} ‚Ä¢ ${l.duration}m ${l.repeat!=="none"?"üîÑ":""}</div>
                <div class="task-footer">
                    <div class="task-actions">
                        <i data-lucide="edit-2" onclick="openModal('${l.type}', ${l.id})" style="opacity: 0.2"></i>
                        <i data-lucide="trash-2" onclick="deleteItem(${l.id}, event)" style="opacity: 0.2"></i>
                        <i data-lucide="${l.completed?"check-circle":"circle"}" 
                           onclick="toggleComplete(${l.id}, event)" 
                           style="color: ${l.color||"#54a0ff"}; ${l.completed?"opacity:1":"opacity:0.8"}"></i>
                    </div>
                </div>
            `,g.appendChild(r)})}),lucide.createIcons()}function O(){i.filter(n=>n.repeat&&n.repeat!=="none").forEach(n=>{if(!i.find(t=>t.title===n.title&&t.date===d)){let t=!1;const o=new Date(d).getDay();n.repeat==="daily"&&(t=!0),n.repeat==="weekly"&&new Date(n.date).getDay()===o&&(t=!0),n.repeat==="weekday"&&o>=1&&o<=5&&(t=!0),t&&i.push({...n,id:Date.now()+Math.random(),date:d,completed:!1})}}),v()}window.toggleFabMenu=()=>{openModal("schedule",null,!0)};window.openModal=(e,n=null)=>{x=e,k=n,C.style.display="flex";const s=document.getElementById("modal-title");if(e==="habit"?s.textContent="New Habit":s.textContent="New Task",n){const t=i.find(a=>a.id===n);if(b.value=t.title,T.value=t.notes||"",t.startTime){const[a,o]=t.startTime.split(":");m.value=`${a}:00`}else m.value="";S.value=t.duration,y=t.repeat,f=t.color,I.style.display="block"}else b.value="",T.value="",new Date().getHours().toString().padStart(2,"0"),e==="sort_task"||e==="task"?(m.value="",I.style.display="none"):(m.value="00:00",I.style.display="block"),S.value=30,y="none",f="#54a0ff";m.step="300",A(),W(),_.onclick=V,z.classList.remove("open"),R.classList.remove("open")};window.closeModal=()=>{C.style.display="none"};function V(){const e=b.value,n=T.value,s=m.value,t=parseInt(S.value);if(e){if(k){const a=i.findIndex(o=>o.id===k);i[a]={...i[a],title:e,notes:n,startTime:s,duration:t,repeat:y,color:f}}else i.push({id:Date.now(),title:e,notes:n,startTime:s,duration:t,completed:!1,date:d,type:x,repeat:y,color:f});v(),h(),M(),closeModal()}}window.toggleComplete=(e,n)=>{n.stopPropagation();const s=i.find(t=>t.id===e);s&&(s.completed=!s.completed),v(),h()};window.deleteItem=(e,n)=>{n.stopPropagation(),i=i.filter(s=>s.id!==e),v(),h(),M()};function Y(){document.querySelectorAll(".color-circle").forEach(e=>{e.onclick=()=>{f=e.dataset.color,W()}}),document.querySelectorAll(".chip-modern").forEach(e=>{e.onclick=()=>{y=e.dataset.repeat,A()}})}function W(){document.querySelectorAll(".color-circle").forEach(e=>{e.classList.toggle("active",e.dataset.color===f)})}function A(){document.querySelectorAll(".chip-modern").forEach(e=>{e.classList.toggle("active",e.dataset.repeat===y)})}function H(){const e=new Date;if(e.toISOString().split("T")[0]===d){w.style.display="block";const n=e.getHours(),s=e.getMinutes(),t=40+n*u+s/60*u;w.style.top=`${t}px`}else w.style.display="none"}const P=document.getElementById("settings-modal");window.openSettings=()=>{P.style.display="flex"};window.closeSettings=()=>{P.style.display="none"};window.setTheme=e=>{document.body.className=`theme-${e}`,localStorage.setItem("theme",e)};const L=localStorage.getItem("theme"),Q=["blue","white","black"];Q.includes(L)?document.body.className=`theme-${L}`:(document.body.className="theme-blue",localStorage.setItem("theme","blue"));function v(){localStorage.setItem("tasks",JSON.stringify(i))}G();
